{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      summary: [],\n      selectedCategory: \"\",\n      currentPage: 1,\n      perPage: 5 // Adjust how many cards per page\n    };\n  },\n  computed: {\n    role() {\n      return localStorage.getItem(\"role\");\n    },\n    totalPages() {\n      return Math.ceil(this.summary.length / this.perPage);\n    },\n    paginatedSummary() {\n      const start = (this.currentPage - 1) * this.perPage;\n      return this.summary.slice(start, start + this.perPage);\n    }\n  },\n  methods: {\n    async getSummary() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const url = this.selectedCategory ? `/summary?category=${this.selectedCategory}` : \"/summary\";\n        const res = await axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.summary = res.data;\n        this.currentPage = 1; // Reset page on filter change\n      } catch (err) {\n        console.error(\"Summary fetch failed:\", err.response?.data?.message || err.message);\n        if (err.response?.status === 401) {\n          alert(\"Session expired. Please login again.\");\n          this.$router.push(\"/login\");\n        }\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++;\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--;\n    }\n  }\n};","map":{"version":3,"names":["axios","data","summary","selectedCategory","currentPage","perPage","computed","role","localStorage","getItem","totalPages","Math","ceil","length","paginatedSummary","start","slice","methods","getSummary","token","url","res","get","headers","Authorization","err","console","error","response","message","status","alert","$router","push","nextPage","prevPage"],"sources":["src/views/UserSummary.vue"],"sourcesContent":["<template>\r\n  <div class=\"summary-wrapper\"><br/>\r\n    <!-- Sticky Header -->\r\n    <div class=\"summary-header\">\r\n      <h2>Product Summary by Category</h2>\r\n      <div class=\"filter-section\">\r\n        <label for=\"category\">Filter by Category: </label>\r\n        <select v-model=\"selectedCategory\" @change=\"getSummary\">\r\n          <option value=\"\">None (All Categories)</option>\r\n          <option value=\"Electronics\">Electronics</option>\r\n          <option value=\"Clothing\">Clothing</option>\r\n          <option value=\"Laptop\">Laptop</option>\r\n          <option value=\"Accessories\">Accessories</option>\r\n          <option value=\"Footwear\">Footwear</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Scrollable Summary Section -->\r\n    <div class=\"summary-scroll\">\r\n      <div v-for=\"item in paginatedSummary\" :key=\"item._id\" class=\"summary-card\">\r\n        <h3>{{ item._id }}</h3>\r\n        <ul>\r\n          <li><strong>Total Products:</strong> {{ item.totalProducts }}</li>\r\n          <li><strong>Average Price:</strong> ₹{{ item.avgPrice.toFixed(2) }}</li>\r\n          <li><strong>Minimum Price:</strong> ₹{{ item.minPrice }}</li>\r\n          <li><strong>Maximum Price:</strong> ₹{{ item.maxPrice }}</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- Pagination Controls -->\r\n      <div class=\"pagination\">\r\n        <button @click=\"prevPage\" :disabled=\"currentPage === 1\">⏮ Prev</button>\r\n        <span>Page {{ currentPage }} of {{ totalPages }}</span>\r\n        <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\">Next ⏭</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      summary: [],\r\n      selectedCategory: \"\",\r\n      currentPage: 1,\r\n      perPage: 5, // Adjust how many cards per page\r\n    };\r\n  },\r\n  computed: {\r\n    role() {\r\n      return localStorage.getItem(\"role\");\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.summary.length / this.perPage);\r\n    },\r\n    paginatedSummary() {\r\n      const start = (this.currentPage - 1) * this.perPage;\r\n      return this.summary.slice(start, start + this.perPage);\r\n    },\r\n  },\r\n  methods: {\r\n    async getSummary() {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const url = this.selectedCategory\r\n          ? `/summary?category=${this.selectedCategory}`\r\n          : \"/summary\";\r\n\r\n        const res = await axios.get(url, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        this.summary = res.data;\r\n        this.currentPage = 1; // Reset page on filter change\r\n      } catch (err) {\r\n        console.error(\"Summary fetch failed:\", err.response?.data?.message || err.message);\r\n        if (err.response?.status === 401) {\r\n          alert(\"Session expired. Please login again.\");\r\n          this.$router.push(\"/login\");\r\n        }\r\n      }\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) this.currentPage++;\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) this.currentPage--;\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.summary-wrapper {\r\n  max-width: 900px;\r\n  margin: 30px auto;\r\n  height: 90vh;\r\n  background: linear-gradient(135deg, #f0f8ff, #e0f7fa);\r\n  border-radius: 16px;\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\r\n  display: flex;\r\n  flex-direction: column;\r\n  font-family: 'Segoe UI', sans-serif;\r\n}\r\n\r\n.summary-header {\r\n  padding: 20px 30px;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #ddd;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  border-top-left-radius: 16px;\r\n  border-top-right-radius: 16px;\r\n}\r\n\r\n.summary-header h2 {\r\n  margin: 0 0 15px;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.filter-section label {\r\n  font-weight: 600;\r\n  font-size: 15px;\r\n}\r\n\r\n.filter-section select {\r\n  padding: 8px 14px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ccc;\r\n  background-color: #ffffff;\r\n  font-size: 15px;\r\n}\r\n\r\n.summary-scroll {\r\n  overflow-y: auto;\r\n  padding: 20px 30px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.summary-card {\r\n  background-color: #ffffff;\r\n  border-left: 6px solid #3498db;\r\n  margin-bottom: 20px;\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);\r\n  transition: box-shadow 0.3s ease;\r\n}\r\n\r\n.summary-card:hover {\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\r\n  background-color: #f4fcff;\r\n}\r\n\r\n.summary-card h3 {\r\n  margin-top: 0;\r\n  color: #2c3e50;\r\n  border-bottom: 1px solid #ddd;\r\n  padding-bottom: 8px;\r\n  font-size: 20px;\r\n}\r\n\r\n.summary-card ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin-top: 12px;\r\n}\r\n\r\n.summary-card li {\r\n  margin: 6px 0;\r\n  font-size: 15px;\r\n  color: #444;\r\n}\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 15px;\r\n  gap: 12px;\r\n}\r\n\r\n.pagination button {\r\n  padding: 8px 16px;\r\n  background-color: #3498db;\r\n  color: white;\r\n  font-weight: bold;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: background 0.3s;\r\n}\r\n\r\n.pagination button:hover:not(:disabled) {\r\n  background-color: #2980b9;\r\n}\r\n\r\n.pagination button:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n</style>"],"mappings":";AAyCA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,gBAAA;MACAC,WAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACAC,KAAA;MACA,OAAAC,YAAA,CAAAC,OAAA;IACA;IACAC,WAAA;MACA,OAAAC,IAAA,CAAAC,IAAA,MAAAV,OAAA,CAAAW,MAAA,QAAAR,OAAA;IACA;IACAS,iBAAA;MACA,MAAAC,KAAA,SAAAX,WAAA,aAAAC,OAAA;MACA,YAAAH,OAAA,CAAAc,KAAA,CAAAD,KAAA,EAAAA,KAAA,QAAAV,OAAA;IACA;EACA;EACAY,OAAA;IACA,MAAAC,WAAA;MACA;QACA,MAAAC,KAAA,GAAAX,YAAA,CAAAC,OAAA;QACA,MAAAW,GAAA,QAAAjB,gBAAA,GACA,0BAAAA,gBAAA,KACA;QAEA,MAAAkB,GAAA,SAAArB,KAAA,CAAAsB,GAAA,CAAAF,GAAA;UACAG,OAAA;YACAC,aAAA,YAAAL,KAAA;UACA;QACA;QACA,KAAAjB,OAAA,GAAAmB,GAAA,CAAApB,IAAA;QACA,KAAAG,WAAA;MACA,SAAAqB,GAAA;QACAC,OAAA,CAAAC,KAAA,0BAAAF,GAAA,CAAAG,QAAA,EAAA3B,IAAA,EAAA4B,OAAA,IAAAJ,GAAA,CAAAI,OAAA;QACA,IAAAJ,GAAA,CAAAG,QAAA,EAAAE,MAAA;UACAC,KAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA;IACA;IACAC,SAAA;MACA,SAAA9B,WAAA,QAAAM,UAAA,OAAAN,WAAA;IACA;IACA+B,SAAA;MACA,SAAA/B,WAAA,WAAAA,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}