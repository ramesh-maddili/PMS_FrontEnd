{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      summary: [],\n      selectedCategory: \"\"\n    };\n  },\n  computed: {\n    role() {\n      return localStorage.getItem(\"role\");\n    }\n  },\n  created() {\n    if (this.role === \"Admin\") {\n      this.getSummary();\n    } else {\n      this.$router.push(\"/products\");\n    }\n  },\n  methods: {\n    async getSummary() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const url = this.selectedCategory ? `/summary?category=${this.selectedCategory}` : \"/summary\";\n        const res = await axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.summary = res.data;\n      } catch (err) {\n        console.error(\"Summary fetch failed:\", err.response?.data?.message || err.message);\n        if (err.response?.status === 401) {\n          alert(\"Session expired. Please login again.\");\n          this.$router.push(\"/login\");\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","summary","selectedCategory","computed","role","localStorage","getItem","created","getSummary","$router","push","methods","token","url","res","get","headers","Authorization","err","console","error","response","message","status","alert"],"sources":["src/views/UserSummary.vue"],"sourcesContent":["<template>\r\n  <div class=\"summary-container\">\r\n    <h2>Product Summary by Category</h2>\r\n\r\n    <div class=\"filter-section\">\r\n      <label for=\"category\">Filter by Category: </label>\r\n      <select v-model=\"selectedCategory\" @change=\"getSummary\">\r\n        <option value=\"\">None (All Categories)</option>\r\n        <option value=\"Electronics\">Electronics</option>\r\n        <option value=\"Clothing\">Clothing</option>\r\n        <option value=\"Laptop\">Laptop</option>\r\n        <option value=\"Accessories\">Accessories</option>\r\n        <option value=\"Footwear\">Footwear</option>\r\n      </select>\r\n    </div>\r\n\r\n    <div v-for=\"item in summary\" :key=\"item._id\" class=\"summary-card\">\r\n      <h3>{{ item._id }}</h3>\r\n      <ul>\r\n        <li><strong>Total Products:</strong> {{ item.totalProducts }}</li>\r\n        <li><strong>Average Price:</strong> ₹{{ item.avgPrice.toFixed(2) }}</li>\r\n        <li><strong>Minimum Price:</strong> ₹{{ item.minPrice }}</li>\r\n        <li><strong>Maximum Price:</strong> ₹{{ item.maxPrice }}</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      summary: [],\r\n      selectedCategory: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    role() {\r\n      return localStorage.getItem(\"role\");\r\n    },\r\n  },\r\n  created() {\r\n    if (this.role === \"Admin\") {\r\n      this.getSummary();\r\n    } else {\r\n      this.$router.push(\"/products\");\r\n    }\r\n  },\r\n  methods: {\r\n    async getSummary() {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const url = this.selectedCategory\r\n          ? `/summary?category=${this.selectedCategory}`\r\n          : \"/summary\";\r\n\r\n        const res = await axios.get(url, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        this.summary = res.data;\r\n      } catch (err) {\r\n        console.error(\r\n          \"Summary fetch failed:\",\r\n          err.response?.data?.message || err.message\r\n        );\r\n        if (err.response?.status === 401) {\r\n          alert(\"Session expired. Please login again.\");\r\n          this.$router.push(\"/login\");\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.summary-container {\r\n  max-width: 900px;\r\n  margin: 40px auto;\r\n  padding: 30px;\r\n  background: linear-gradient(135deg, #f0f8ff, #e0f7fa);\r\n  border-radius: 16px;\r\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\r\n  font-family: 'Segoe UI', sans-serif;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 25px;\r\n}\r\n\r\n.filter-section label {\r\n  font-weight: bold;\r\n  margin-right: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.filter-section select {\r\n  padding: 8px 14px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ccc;\r\n  font-size: 15px;\r\n  background-color: #ffffff;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.filter-section select:focus {\r\n  border-color: #3498db;\r\n  outline: none;\r\n}\r\n\r\n.summary-card {\r\n  background-color: #ffffff;\r\n  border-left: 6px solid #3498db;\r\n  margin-bottom: 20px;\r\n  padding: 20px 25px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);\r\n  transition: box-shadow 0.3s ease;\r\n}\r\n\r\n.summary-card:hover {\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\r\n  background-color: #f4fcff;\r\n}\r\n\r\n.summary-card h3 {\r\n  margin-top: 0;\r\n  color: #2c3e50;\r\n  border-bottom: 1px solid #ddd;\r\n  padding-bottom: 8px;\r\n  font-size: 20px;\r\n}\r\n\r\n.summary-card ul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 12px 0 0;\r\n}\r\n\r\n.summary-card li {\r\n  margin: 6px 0;\r\n  font-size: 15px;\r\n  color: #444;\r\n}\r\n</style>\r\n\r\n"],"mappings":";AA6BA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,gBAAA;IACA;EACA;EACAC,QAAA;IACAC,KAAA;MACA,OAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,SAAAH,IAAA;MACA,KAAAI,UAAA;IACA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAH,WAAA;MACA;QACA,MAAAI,KAAA,GAAAP,YAAA,CAAAC,OAAA;QACA,MAAAO,GAAA,QAAAX,gBAAA,GACA,0BAAAA,gBAAA,KACA;QAEA,MAAAY,GAAA,SAAAf,KAAA,CAAAgB,GAAA,CAAAF,GAAA;UACAG,OAAA;YACAC,aAAA,YAAAL,KAAA;UACA;QACA;QACA,KAAAX,OAAA,GAAAa,GAAA,CAAAd,IAAA;MACA,SAAAkB,GAAA;QACAC,OAAA,CAAAC,KAAA,CACA,yBACAF,GAAA,CAAAG,QAAA,EAAArB,IAAA,EAAAsB,OAAA,IAAAJ,GAAA,CAAAI,OACA;QACA,IAAAJ,GAAA,CAAAG,QAAA,EAAAE,MAAA;UACAC,KAAA;UACA,KAAAf,OAAA,CAAAC,IAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}